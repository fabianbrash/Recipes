###TKG and TKG CLI information
#REF:https://www.virtuallyghetto.com/2020/03/sneak-peak-at-deploying-tanzu-kubernetes-grid-plus-on-vsphere-vmware-cloud-on-aws.html
#REF:https://cloud.vmware.com/community/2020/03/12/containers-kubernetes-vmcaws-tanzu/
#REF:https://github.com/kubernetes-sigs/cluster-api-provider-vsphere

##First you need to download the tkg cli tool
#REF:https://my.vmware.com/web/vmware/details?downloadGroup=TKG-100&productId=988&rPId=45068

##Grab the photon OS from the above as well as the ova's I downloaded from the below did not work
##https://github.com/kubernetes-sigs/cluster-api-provider-vsphere
#Download the hap-proxy ova as well

##the tkg file is a .gz(why ooh why) so use gunzip to strip off the .gz
##tkg-linux-amd64-v1.0.0_vmware.1.gz will become tkg-linux-amd64-v1.0.0_vmware.1

mv tkg-linux-amd64-v1.0.0_vmware.1 tkg
sudo mv tkg /usr/local/bin

##the system you run this from must have kubectl and docker installed, you should know how to do that
##also the network that you deploy this into must have DHCP configured

tkg init --ui

##The above will launch a web browser to localhost:8080
##obvsiously select "Deploy on VSPHERE" and answer all the questions

##If everything went well you should now have a TKG management cluster now let's deploy a guest cluster

tkg create cluster tkg-cluster-0 --plan=dev --worker-machine-count=2

##for more options tkg create cluster --help

##once done the 2 contexts will be merged(I'm not good with k8s contexts yet) if you need get the actual kube-config file
##ssh into the controller VM(s) ssh capv@1.1.1.1 then you can cp /etc/kubernetes/admin.conf again this is upstream k8s

##let's now scale our worker nodes
tkg scale cluster tkg-cluster-0 -w 5



